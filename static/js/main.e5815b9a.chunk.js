(this["webpackJsonpspotify-playlist-chooser"]=this["webpackJsonpspotify-playlist-chooser"]||[]).push([[0],{154:function(e,t,a){},155:function(e,t,a){},18:function(e,t,a){e.exports={body:"Body_body__1cbFo",navbar:"Body_navbar__4EtRh",section:"Body_section__qFuia",playlistsHead:"Body_playlistsHead__1p9nR",featuredPlaylists:"Body_featuredPlaylists__2oCKt",userPlaylists:"Body_userPlaylists__3Layj",listItem:"Body_listItem__3bwpc",controlButtons:"Body_controlButtons__1Kk26"}},483:function(e,t,a){"use strict";a.r(t);var s=a(1),l=a.n(s),i=a(38),r=a.n(i),o=(a(154),a(29)),c=(a(155),a(51)),n=a.n(c),d=a(3);var u=function(){Object(s.useEffect)((function(){if(window.location.hash){var e=window.location.hash.substring(1).split("&").reduce((function(e,t){var a=t.split("="),s=Object(o.a)(a,2),l=s[0],i=s[1];return e[l]=i,e}),{});window.location.hash="",e.length<3?console.log(e.error):(console.log(e.access_token),localStorage.setItem("accessToken",e.access_token),localStorage.setItem("authDate",new Date),localStorage.setItem("expireTime",e.expires_in),window.location="http://localhost:3000/")}}),[]);return Object(d.jsxs)("div",{className:n.a.loginPage,children:[Object(d.jsx)("div",{className:n.a.navbar,children:"Playlist Chooser"}),Object(d.jsx)("div",{className:n.a.body,children:Object(d.jsxs)("div",{className:n.a.loginCard,children:[Object(d.jsx)("div",{children:"Login to your Spotify account"}),Object(d.jsx)("button",{onClick:function(){window.location="https://accounts.spotify.com/authorize?client_id=b62100f5a45b4136aff25a6e265201ea&redirect_uri=http://localhost:3000/&response_type=token&show_dialog&scope=playlist-modify-private%20playlist-read-private%20playlist-modify-public%20playlist-read-collaborative"},children:"Login"})]})})]})},p=a(10),b=a(40),j=a(147),f=a.n(j),y=a(18),g=a.n(y),h=(a(174),function(){var e=Object(s.useState)({userPlaylists:[],featuredPlaylists:[]}),t=Object(o.a)(e,2),a=t[0],l=t[1],i="https://api.spotify.com/v1/browse/featured-playlists",r=function(){localStorage.removeItem("expireTime"),localStorage.removeItem("accessToken"),localStorage.removeItem("authDate"),window.location="http://localhost:3000/"};Object(s.useEffect)((function(){localStorage.getItem("userPlaylists")&&l((function(e){return Object(p.a)(Object(p.a)({},e),{},{userPlaylists:JSON.parse(localStorage.getItem("userPlaylists"))})})),function(e){var t=localStorage.getItem("accessToken"),a=new Date;null==t?(alert("You are not logged in."),r()):Math.abs(a-new Date(localStorage.getItem("authDate")))/1e3>parseInt(localStorage.getItem("expireTime"))?r():f.a.get(e,{headers:{Authorization:"Bearer "+t}}).then((function(t){if("https://api.spotify.com/v1/me/playlists"===e)console.log("user",t.data.items),l((function(e){return Object(p.a)(Object(p.a)({},e),{},{userPlaylists:t.data.items})}));else if(e===i){var a=t.data.playlists.items;if(localStorage.getItem("userPlaylists")){var s=JSON.parse(localStorage.getItem("userPlaylists")).map((function(e){return e.id})),r=new Set(s);a=a.filter((function(e){return!r.has(e.id)}))}l((function(e){return Object(p.a)(Object(p.a)({},e),{},{featuredPlaylists:a})}))}})).catch((function(e){console.log(e)}))}(i)}),[]);return Object(d.jsx)(b.a,{onDragEnd:function(e){var t=e.source,s=e.destination;if(s){var i=a.featuredPlaylists,r=a.userPlaylists;if("featuredListDroppable"===t.droppableId){var c=i.splice(t.index,1),n=Object(o.a)(c,1)[0];"userListDroppable"===s.droppableId?r&&r.splice(s.index,0,n):"featuredListDroppable"===s.droppableId&&i.splice(s.index,0,n)}else if("userListDroppable"===t.droppableId){var d=r.splice(t.index,1),u=Object(o.a)(d,1)[0];"featuredListDroppable"===s.droppableId?i.splice(s.index,0,u):"userListDroppable"===s.droppableId&&r&&r.splice(s.index,0,u)}l({userPlaylists:r,featuredPlaylists:i})}},children:Object(d.jsxs)("div",{className:g.a.body,children:[Object(d.jsx)("div",{className:g.a.navbar,children:"Playlist Chooser"}),Object(d.jsxs)("div",{className:g.a.section,children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{className:g.a.playlistsHead,children:"Featured playlists"}),Object(d.jsx)(b.c,{droppableId:"featuredListDroppable",children:function(e,t){return Object(d.jsxs)("div",Object(p.a)(Object(p.a)({ref:e.innerRef},e.droppableProps),{},{className:g.a.featuredPlaylists,children:[a.featuredPlaylists.map((function(e,t){return Object(d.jsx)(b.b,{draggableId:e.id,index:t,children:function(t,a){return Object(d.jsxs)("div",Object(p.a)(Object(p.a)(Object(p.a)({ref:t.innerRef},t.draggableProps),t.dragHandleProps),{},{className:g.a.listItem,id:e.id,children:[Object(d.jsx)("img",{source:e.images[0].url,src:e.images[0].url,alt:"playlist image"}),Object(d.jsx)("div",{children:e.name})]}))}},e.id)})),e.placeholder]}))}})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{className:g.a.playlistsHead,children:"My playlists"}),Object(d.jsx)(b.c,{droppableId:"userListDroppable",children:function(e,t){return Object(d.jsxs)("div",Object(p.a)(Object(p.a)({ref:e.innerRef},e.droppableProps),{},{className:g.a.userPlaylists,children:[null==a.userPlaylists?Object(d.jsx)("div",{children:"No playlists found"}):Object(d.jsx)("div",{}),Object(d.jsx)("div",{children:a.userPlaylists.map((function(e,t){return Object(d.jsx)(b.b,{draggableId:e.id,index:t,children:function(t,a){return Object(d.jsxs)("div",Object(p.a)(Object(p.a)(Object(p.a)({ref:t.innerRef},t.draggableProps),t.dragHandleProps),{},{className:g.a.listItem,id:e.id,children:[Object(d.jsx)("img",{src:e.images[0].url,alt:"playlist image"}),Object(d.jsx)("div",{children:e.name})]}))}},e.id)}))}),e.placeholder]}))}})]})]}),Object(d.jsx)("div",{className:g.a.controlButtons,children:Object(d.jsx)("button",{onClick:function(){a.userPlaylists=a.userPlaylists.filter((function(e){return"dummyId"!==e.id})),localStorage.setItem("userPlaylists",JSON.stringify(a.userPlaylists))},children:"Save"})})]})})});var m=function(){var e=Object(s.useState)(!1),t=Object(o.a)(e,2),a=t[0],l=t[1];return null!==localStorage.getItem("accessToken")&&!1===a?l(!0):null===localStorage.getItem("accessToken")&&!0===a&&l(!1),Object(d.jsx)("div",{className:"app",children:a?Object(d.jsx)(h,{}):Object(d.jsx)(u,{})})};r.a.render(Object(d.jsx)(l.a.StrictMode,{children:Object(d.jsx)(m,{})}),document.getElementById("root"))},51:function(e,t,a){e.exports={loginPage:"Login_loginPage__tCIA8",navbar:"Login_navbar__2KHqk",body:"Login_body__Mp-3c",loginCard:"Login_loginCard__25C0p"}}},[[483,1,2]]]);
//# sourceMappingURL=main.e5815b9a.chunk.js.map