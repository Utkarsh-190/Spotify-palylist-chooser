(this["webpackJsonpspotify-playlist-chooser"]=this["webpackJsonpspotify-playlist-chooser"]||[]).push([[0],{27:function(e,t,a){},28:function(e,t,a){},4:function(e,t,a){e.exports={body:"Body_body__19DrI",navbar:"Body_navbar__2gyk3",section:"Body_section__23hBa",playlistsHead:"Body_playlistsHead__vCSnd",featuredPlaylists:"Body_featuredPlaylists__1BzQr",userPlaylists:"Body_userPlaylists__ufFVG",listItem:"Body_listItem__127Zy",controlButtons:"Body_controlButtons__5Nr8c"}},54:function(e,t,a){"use strict";a.r(t);var s=a(0),i=a.n(s),l=a(6),r=a.n(l),o=(a(27),a(5)),c=(a(28),a(8)),n=a.n(c),d=a(1);var u=function(){Object(s.useEffect)((function(){if(window.location.hash){var e=window.location.hash.substring(1).split("&").reduce((function(e,t){var a=t.split("="),s=Object(o.a)(a,2),i=s[0],l=s[1];return e[i]=l,e}),{});window.location.hash="",e.length<3?console.log(e.error):(console.log(e.access_token),localStorage.setItem("accessToken",e.access_token),localStorage.setItem("authDate",new Date),localStorage.setItem("expireTime",e.expires_in),window.location="https://utkarsh-190.github.io/Spotify-palylist-chooser/")}}),[]);return Object(d.jsxs)("div",{className:n.a.loginPage,children:[Object(d.jsx)("div",{className:n.a.navbar,children:"Playlist Chooser"}),Object(d.jsx)("div",{className:n.a.body,children:Object(d.jsxs)("div",{className:n.a.loginCard,children:[Object(d.jsx)("div",{children:"Login to your Spotify account"}),Object(d.jsx)("button",{onClick:function(){window.location="https://accounts.spotify.com/authorize?client_id=b62100f5a45b4136aff25a6e265201ea&redirect_uri=https://utkarsh-190.github.io/Spotify-palylist-chooser/&response_type=token&show_dialog&scope=playlist-modify-private%20playlist-read-private%20playlist-modify-public%20playlist-read-collaborative"},children:"Login"})]})})]})},p=a(2),b=a(7),j=a(21),y=a.n(j),f=a(4),g=a.n(f),h=function(){var e=Object(s.useState)({userPlaylists:[],featuredPlaylists:[]}),t=Object(o.a)(e,2),a=t[0],i=t[1],l="https://api.spotify.com/v1/browse/featured-playlists",r=function(){localStorage.removeItem("expireTime"),localStorage.removeItem("accessToken"),localStorage.removeItem("authDate"),window.location="https://utkarsh-190.github.io/Spotify-palylist-chooser/"};Object(s.useEffect)((function(){localStorage.getItem("userPlaylists")&&i((function(e){return Object(p.a)(Object(p.a)({},e),{},{userPlaylists:JSON.parse(localStorage.getItem("userPlaylists"))})})),function(e){var t=localStorage.getItem("accessToken"),a=new Date;null==t?(alert("You are not logged in."),r()):Math.abs(a-new Date(localStorage.getItem("authDate")))/1e3>parseInt(localStorage.getItem("expireTime"))?r():y.a.get(e,{headers:{Authorization:"Bearer "+t}}).then((function(t){if("https://api.spotify.com/v1/me/playlists"===e)console.log("user",t.data.items),i((function(e){return Object(p.a)(Object(p.a)({},e),{},{userPlaylists:t.data.items})}));else if(e===l){var a=t.data.playlists.items;if(localStorage.getItem("userPlaylists")){var s=JSON.parse(localStorage.getItem("userPlaylists")).map((function(e){return e.id})),r=new Set(s);a=a.filter((function(e){return!r.has(e.id)}))}i((function(e){return Object(p.a)(Object(p.a)({},e),{},{featuredPlaylists:a})}))}})).catch((function(e){console.log(e)}))}(l)}),[]);return Object(d.jsx)(b.a,{onDragEnd:function(e){var t=e.source,s=e.destination;if(s){var l=a.featuredPlaylists,r=a.userPlaylists;if("featuredListDroppable"===t.droppableId){var c=l.splice(t.index,1),n=Object(o.a)(c,1)[0];"userListDroppable"===s.droppableId?r&&r.splice(s.index,0,n):"featuredListDroppable"===s.droppableId&&l.splice(s.index,0,n)}else if("userListDroppable"===t.droppableId){var d=r.splice(t.index,1),u=Object(o.a)(d,1)[0];"featuredListDroppable"===s.droppableId?l.splice(s.index,0,u):"userListDroppable"===s.droppableId&&r&&r.splice(s.index,0,u)}i({userPlaylists:r,featuredPlaylists:l})}},children:Object(d.jsxs)("div",{className:g.a.body,children:[Object(d.jsx)("div",{className:g.a.navbar,children:"Playlist Chooser"}),Object(d.jsxs)("div",{className:g.a.section,children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{className:g.a.playlistsHead,children:"Featured playlists"}),Object(d.jsx)(b.c,{droppableId:"featuredListDroppable",children:function(e,t){return Object(d.jsxs)("div",Object(p.a)(Object(p.a)({ref:e.innerRef},e.droppableProps),{},{className:g.a.featuredPlaylists,children:[a.featuredPlaylists.map((function(e,t){return Object(d.jsx)(b.b,{draggableId:e.id,index:t,children:function(t,a){return Object(d.jsxs)("div",Object(p.a)(Object(p.a)(Object(p.a)({ref:t.innerRef},t.draggableProps),t.dragHandleProps),{},{className:g.a.listItem,id:e.id,children:[Object(d.jsx)("img",{source:e.images[0].url,src:e.images[0].url,alt:"playlist image"}),Object(d.jsx)("div",{children:e.name})]}))}},e.id)})),e.placeholder]}))}})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{className:g.a.playlistsHead,children:"My playlists"}),Object(d.jsx)(b.c,{droppableId:"userListDroppable",children:function(e,t){return Object(d.jsxs)("div",Object(p.a)(Object(p.a)({ref:e.innerRef},e.droppableProps),{},{className:g.a.userPlaylists,children:[null==a.userPlaylists?Object(d.jsx)("div",{children:"No playlists found"}):Object(d.jsx)("div",{}),Object(d.jsx)("div",{children:a.userPlaylists.map((function(e,t){return Object(d.jsx)(b.b,{draggableId:e.id,index:t,children:function(t,a){return Object(d.jsxs)("div",Object(p.a)(Object(p.a)(Object(p.a)({ref:t.innerRef},t.draggableProps),t.dragHandleProps),{},{className:g.a.listItem,id:e.id,children:[Object(d.jsx)("img",{src:e.images[0].url,alt:"playlist image"}),Object(d.jsx)("div",{children:e.name})]}))}},e.id)}))}),e.placeholder]}))}})]})]}),Object(d.jsx)("div",{className:g.a.controlButtons,children:Object(d.jsx)("button",{onClick:function(){a.userPlaylists=a.userPlaylists.filter((function(e){return"dummyId"!==e.id})),localStorage.setItem("userPlaylists",JSON.stringify(a.userPlaylists))},children:"Save"})})]})})};var m=function(){var e=Object(s.useState)(!1),t=Object(o.a)(e,2),a=t[0],i=t[1];return null!==localStorage.getItem("accessToken")&&!1===a?i(!0):null===localStorage.getItem("accessToken")&&!0===a&&i(!1),Object(d.jsx)("div",{className:"app",children:a?Object(d.jsx)(h,{}):Object(d.jsx)(u,{})})};r.a.render(Object(d.jsx)(i.a.StrictMode,{children:Object(d.jsx)(m,{})}),document.getElementById("root"))},8:function(e,t,a){e.exports={loginPage:"Login_loginPage__4bnNq",navbar:"Login_navbar__3LOUY",body:"Login_body__3u6ap",loginCard:"Login_loginCard__3q-Po"}}},[[54,1,2]]]);
//# sourceMappingURL=main.dd1dbbd2.chunk.js.map